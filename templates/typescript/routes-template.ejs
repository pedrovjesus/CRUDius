import { Router } from 'express';
<% entities.forEach(entity => { %>
import { <%= entity.name %>Controller } from '../controllers/<%= entity.name %>/<%= entity.name %>.controller';
const <%= entity.name.toLowerCase() %>Controller = new <%= entity.name %>Controller();
<% }); %>

const router = Router();

router.get('/', (_, res) => {
  return res.send('Default input');
});

<% entities.forEach(entity => { %>
/**
 * @swagger
 * components:
 *   schemas:
 *     <%= entity.name %>:
 *       type: object
 *       properties:
<% entity.properties.forEach(prop => { %>
 *         <%= prop.field %>:
 *           type: <%= prop.type %>
<% if(!prop.optional){ %>
 *           required: true
<% } %>
<% }); %>
 */

/**
 * @swagger
 * /<%= entity.name.toLowerCase() %>:
 *   get:
 *     summary: Lista todos <%= entity.name.toLowerCase() %>
 *     tags: [<%= entity.name %>]
 *     responses:
 *       200:
 *         description: Lista de <%= entity.name.toLowerCase() %>
 *         content:
 *           application/json:
 *             schema:
 *               type: array
 *               items:
 *                 $ref: '#/components/schemas/<%= entity.name %>'
 */
router.get('/<%= entity.name.toLowerCase() %>', <%= entity.name.toLowerCase() %>Controller.getAll.bind(<%= entity.name.toLowerCase() %>Controller));

/**
 * @swagger
 * /<%= entity.name.toLowerCase() %>/{id}:
 *   get:
 *     summary: Busca um <%= entity.name.toLowerCase() %> pelo ID
 *     tags: [<%= entity.name %>]
 *     parameters:
 *       - in: path
 *         name: id
 *         schema:
 *           type: number
 *         required: true
 *         description: ID do <%= entity.name.toLowerCase() %>
 *     responses:
 *       200:
 *         description: Detalhes do <%= entity.name.toLowerCase() %>
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/<%= entity.name %>'
 */
router.get('/<%= entity.name.toLowerCase() %>/:id', <%= entity.name.toLowerCase() %>Controller.getById.bind(<%= entity.name.toLowerCase() %>Controller));

<% entities.forEach(entity => { %>
/**
 * @swagger
 * components:
 *   schemas:
 *     <%= entity.name %>:
 *       type: object
 *       properties:
<% entity.properties.forEach(prop => { %>
 *         <%= prop.field %>:
 *           type: <%= prop.type %>
<% if(!prop.optional){ %>
 *           required: true
<% } %>
<% }); %>
 *     Create<%= entity.name %>:
 *       type: object
 *       properties:
<% entity.properties.forEach(prop => { if(prop.field !== 'id'){ %>
 *         <%= prop.field %>:
 *           type: <%= prop.type %>
<% if(!prop.optional){ %>
 *           required: true
<% } %>
<% } }); %>
 */

/**
 * @swagger
 * /<%= entity.name.toLowerCase() %>:
 *   post:
 *     summary: Cria um novo <%= entity.name.toLowerCase() %>
 *     tags: [<%= entity.name %>]
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             $ref: '#/components/schemas/Create<%= entity.name %>'
 *     responses:
 *       201:
 *         description: Criado com sucesso
 */
router.post('/<%= entity.name.toLowerCase() %>', <%= entity.name.toLowerCase() %>Controller.create.bind(<%= entity.name.toLowerCase() %>Controller));
<% }); %>

/**
 * @swagger
 * /<%= entity.name.toLowerCase() %>/{id}:
 *   put:
 *     summary: Atualiza um <%= entity.name.toLowerCase() %> pelo ID
 *     tags: [<%= entity.name %>]
 *     parameters:
 *       - in: path
 *         name: id
 *         schema:
 *           type: number
 *         required: true
 *         description: ID do <%= entity.name.toLowerCase() %>
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             $ref: '#/components/schemas/<%= entity.name %>'
 *     responses:
 *       200:
 *         description: Atualizado com sucesso
 */
router.put('/<%= entity.name.toLowerCase() %>/:id', <%= entity.name.toLowerCase() %>Controller.updateById.bind(<%= entity.name.toLowerCase() %>Controller));

/**
 * @swagger
 * /<%= entity.name.toLowerCase() %>/{id}:
 *   delete:
 *     summary: Remove um <%= entity.name.toLowerCase() %> pelo ID
 *     tags: [<%= entity.name %>]
 *     parameters:
 *       - in: path
 *         name: id
 *         schema:
 *           type: number
 *         required: true
 *         description: ID do <%= entity.name.toLowerCase() %>
 *     responses:
 *       204:
 *         description: Removido com sucesso
 */
router.delete('/<%= entity.name.toLowerCase() %>/:id', <%= entity.name.toLowerCase() %>Controller.deleteById.bind(<%= entity.name.toLowerCase() %>Controller));

<% }); %>

export { router };
